<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta property="og:url" content="/docs/install.html"/>
    <meta property="og:site_name" content="Just"/>
    <meta property="og:title" content="Installation"/>
    <meta property="og:image" content="/docs/static/og_image.png"/>
    <meta property="og:description" content=""/>

    <link rel="stylesheet" type="text/css" media="screen" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" media="screen" href="css/main.css">
    <link rel="stylesheet" type="text/css" media="screen" href="css/github-light.css">

    <link href="https://fonts.googleapis.com/css?family=Work+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=VT323" rel="stylesheet">

    <link rel="icon" href="static/favicon.png" type="image/x-icon">

    <base href="/docs/"/>

    <title>Just Auth Component</title>
    <meta name="description" content="">

    <link rel="canonical" href="/docs/auth.html">
</head>
<body>
<div class="page-menu">
    <div class="page-menu-item"><a>Just</a></div>
    <div class="page-menu-item"><a>Docs</a></div>
    <div class="page-menu-item"><a>Support</a></div>
</div>

<section class="main-content">
    <div class="main-content-menu">
        <div class="main-content-menu-data">
            <div class="menu-data-group">
                <h3 class="menu-group-title">Components</h3>

                <ul class="menu-group-list">
                    <li><a href="/docs/auth.html">Auth</a></li>
                    <li><a>Mongo Interface</a></li>
                    <li><a>Plugins</a></li>
                    <li><a>Snapshots</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="main-content-wrapper">
        <div class="markdown-body">
            <h1>Auth Component</h1>

            <p>MSA has it's own auth module that can be used for managing users. All users objects are stored in the
                <code>site-{site_name}-users</code> collection.</p>
            <h2>Auth User Guide</h2>
            <p><strong>mongoSitesApi.auth(login, password)</strong></p>
            <hr>
            <p>Authorizes the user at the system. Returns a Promise object that will be resolved into
                an array with an error and an object which contains a current site name and an active session identifier.</p>
            <p>Params: <code>login</code> and <code>password</code> of the user.</p>
            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth</span>(<span class="pl-s"><span class="pl-pds">"</span>user@msa.com<span
                    class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>sdfj38D$hd<span
                    class="pl-pds">"</span></span>)
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

            <p><strong>mongoSitesApi.auth_register(params)</strong></p>
            <hr>
            <p>Registers a new user at the system. Returns a Promise object that will be resolved into
                an array with an error and an object which contains an activation link and mail options that have been sent to the user email for the activation.</p>
            <p>Params: an object with user details including mandatory fields <code>_id</code> and <code>password</code>.</p>
            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_register</span>({_id:<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>new_user@msa.com<span
                    class="pl-pds">"</span></span>, password<span class="pl-k">:</span> <span class="pl-s"><span
                    class="pl-pds">"</span>mgJ8$fgG<span class="pl-pds">"</span></span>})
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>

                <p>The activation link already contains all necessary infogration for activating the user account. Once user procceeds with the link
                    he is being registered at the system.
                </p>
            </div>

            <p><strong>mongoSitesApi.auth_users()</strong></p>

            <hr>

            <p>Retrieves all users of the system. Returns a Promise object that will be resolved into an array
                with an error and an array with users objects.</p>

            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_users</span>()
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

            <p><strong>mongoSitesApi.auth_check()</strong></p>

            <hr>

            <p>Checks if a user is logged-in at the system. Returns a Promise object that will be resolved into an array
                with an error and a boolean.</p>

            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_check</span>()
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

            <p><strong>mongoSitesApi.auth_logout()</strong></p>

            <hr>

            <p>Logout the user at the system. Returns a Promise object that will be resolved into an array
                with an error and a boolean.</p>

            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_logout</span>()
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

            <p><strong>mongoSitesApi.auth_update(params)</strong></p>

            <hr>

            <p>Updates a user data. Accepts an object with user data to be updated. Returns Promise object.</p>

            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_update</span>()
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

            <p><strong>mongoSitesApi.auth_change_password(params)</strong></p>

            <hr>

            <p>Updates a password of a user. <strong>params</strong> is an object with <em>new_password</em> and <em>old_password</em>
                keys. Returns Promise object.</p>

            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_change_password</span>({ old_password<span class="pl-k">:</span> <span class="pl-s"><span
                    class="pl-pds">'</span>ksdfhf8jsd7H<span class="pl-pds">'</span></span>, new_password<span
                    class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>fhs6H*Rhh$k<span
                    class="pl-pds">'</span></span> })
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

            <p><strong>mongoSitesApi.auth_delete(login || [login1, login2, ...])</strong></p>

            <hr>

            <p>Removes a user or a group of users from the system. Accepts a login string or an array of logins. Returns
                Promise object.</p>

            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_delete</span>([<span class="pl-s"><span class="pl-pds">"</span>user1@msa.com<span
                    class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>user2@msa.com<span
                    class="pl-pds">"</span></span>])
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

            <h3>Resetting Password Process</h3>

            <p><strong>mongoSitesApi.auth_request_reset_password(params)</strong></p>

            <hr>

            <p>Performs request for reseting password. <strong>params</strong> is an object that contains User Id.
                Returns Promise object.</p>

            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_request_reset_password</span>({_id<span class="pl-k">:</span> <span
                    class="pl-smi">User</span>.<span class="pl-smi">_id</span>})
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

            <p><strong>mongoSitesApi.auth_reset_password(params, reset_token)</strong></p>

            <hr>

            <p>Resets password of the user. params is an object that contains new password. reset_token is a token that
                gets from user email link (more information about link read below). Returns Promise object.</p>

            <div class="highlight highlight-source-js"><pre>mongoSitesApi
    .<span class="pl-en">auth_reset_password</span>({password<span class="pl-k">:</span> <span class="pl-s"><span
                    class="pl-pds">'</span>sjd84vbK&amp;j<span class="pl-pds">'</span></span>}, <span class="pl-s"><span
                    class="pl-pds">'</span>caerpq847bc9uerghjse4j3htaoi7ury<span class="pl-pds">'</span></span>)
    .<span class="pl-en">then</span>(<span class="pl-k">function</span>(<span class="pl-smi">res</span>) {
        <span class="pl-c"><span class="pl-c">//</span> your code here</span>
    })</pre>
            </div>

        </div>

    </div>


    <footer class="site-footer">
        <span class="site-footer-owner">Friend Inc IT Lab <a
            href="https://github.com/extremeprog-com">extremeprog-com</a>.</span>
    </footer>

</section>


</body>
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-89570200-2', 'auto');
    ga('send', 'pageview');

</script>
</html>
